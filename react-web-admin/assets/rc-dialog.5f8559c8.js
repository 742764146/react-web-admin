import{e as E,a as C,c as B}from"./@babel.462cdc09.js";import{r as a,R as q}from"./react.1dc75e1e.js";import{l as se,p as ce,j as ue,K as F,P as fe}from"./rc-util.84f8f60a.js";import{c as T}from"./classnames.894b94fb.js";import{C as te}from"./rc-motion.5bae9c79.js";import{j as G,a as y}from"./antd.59c90914.js";function de(e){var n=e.prefixCls,t=e.style,o=e.visible,r=e.maskProps,i=e.motionName;return a.exports.createElement(te,{key:"mask",visible:o,motionName:i,leavedClassName:"".concat(n,"-mask-hidden")},function(l){var c=l.className,d=l.style;return a.exports.createElement("div",E({style:C(C({},d),t),className:T("".concat(n,"-mask"),c)},r))})}function J(e,n,t){var o=n;return!o&&t&&(o="".concat(e,"-").concat(t)),o}function Q(e,n){var t=e["page".concat(n?"Y":"X","Offset")],o="scroll".concat(n?"Top":"Left");if(typeof t!="number"){var r=e.document;t=r.documentElement[o],typeof t!="number"&&(t=r.body[o])}return t}function me(e){var n=e.getBoundingClientRect(),t={left:n.left,top:n.top},o=e.ownerDocument,r=o.defaultView||o.parentWindow;return t.left+=Q(r),t.top+=Q(r,!0),t}var ve=a.exports.memo(function(e){var n=e.children;return n},function(e,n){var t=n.shouldUpdate;return!t}),Z={width:0,height:0,overflow:"hidden",outline:"none"},Ce=q.forwardRef(function(e,n){var t=e.prefixCls,o=e.className,r=e.style,i=e.title,l=e.ariaId,c=e.footer,d=e.closable,b=e.closeIcon,s=e.onClose,x=e.children,m=e.bodyStyle,R=e.bodyProps,h=e.modalRender,N=e.onMouseDown,I=e.onMouseUp,D=e.holderRef,k=e.visible,P=e.forceRender,f=e.width,S=e.height,g=a.exports.useRef(),w=a.exports.useRef();q.useImperativeHandle(n,function(){return{focus:function(){var v;(v=g.current)===null||v===void 0||v.focus()},changeActive:function(v){var O=document,p=O.activeElement;v&&p===w.current?g.current.focus():!v&&p===g.current&&w.current.focus()}}});var _={};f!==void 0&&(_.width=f),S!==void 0&&(_.height=S);var $;c&&($=y("div",{className:"".concat(t,"-footer"),children:c}));var V;i&&(V=y("div",{className:"".concat(t,"-header"),children:y("div",{className:"".concat(t,"-title"),id:l,children:i})}));var U;d&&(U=y("button",{type:"button",onClick:s,"aria-label":"Close",className:"".concat(t,"-close"),children:b||y("span",{className:"".concat(t,"-close-x")})}));var W=G("div",{className:"".concat(t,"-content"),children:[U,V,y("div",{className:"".concat(t,"-body"),style:m,...R,children:x}),$]});return G("div",{role:"dialog","aria-labelledby":i?l:null,"aria-modal":"true",ref:D,style:C(C({},r),_),className:T(t,o),onMouseDown:N,onMouseUp:I,children:[y("div",{tabIndex:0,ref:g,style:Z,"aria-hidden":"true"}),y(ve,{shouldUpdate:k||P,children:h?h(W):W}),y("div",{tabIndex:0,ref:w,style:Z,"aria-hidden":"true"})]},"dialog-element")}),ne=a.exports.forwardRef(function(e,n){var t=e.prefixCls,o=e.title,r=e.style,i=e.className,l=e.visible,c=e.forceRender,d=e.destroyOnClose,b=e.motionName,s=e.ariaId,x=e.onVisibleChanged,m=e.mousePosition,R=a.exports.useRef(),h=a.exports.useState(),N=B(h,2),I=N[0],D=N[1],k={};I&&(k.transformOrigin=I);function P(){var f=me(R.current);D(m?"".concat(m.x-f.left,"px ").concat(m.y-f.top,"px"):"")}return a.exports.createElement(te,{visible:l,onVisibleChanged:x,onAppearPrepare:P,onEnterPrepare:P,forceRender:c,motionName:b,removeOnLeave:d,ref:R},function(f,S){var g=f.className,w=f.style;return a.exports.createElement(Ce,E({},e,{ref:n,title:o,ariaId:s,prefixCls:t,holderRef:S,style:C(C(C({},w),r),k),className:T(i,g)}))})});ne.displayName="Content";function ee(e){var n=e.prefixCls,t=n===void 0?"rc-dialog":n,o=e.zIndex,r=e.visible,i=r===void 0?!1:r,l=e.keyboard,c=l===void 0?!0:l,d=e.focusTriggerAfterClose,b=d===void 0?!0:d,s=e.scrollLocker,x=e.wrapStyle,m=e.wrapClassName,R=e.wrapProps,h=e.onClose,N=e.afterClose,I=e.transitionName,D=e.animation,k=e.closable,P=k===void 0?!0:k,f=e.mask,S=f===void 0?!0:f,g=e.maskTransitionName,w=e.maskAnimation,_=e.maskClosable,$=_===void 0?!0:_,V=e.maskStyle,U=e.maskProps,W=e.rootClassName,M=a.exports.useRef(),v=a.exports.useRef(),O=a.exports.useRef(),p=a.exports.useState(i),H=B(p,2),j=H[0],X=H[1],ae=se();function oe(u){if(u){if(!ue(v.current,document.activeElement)){var A;M.current=document.activeElement,(A=O.current)===null||A===void 0||A.focus()}}else{if(X(!1),S&&M.current&&b){try{M.current.focus({preventScroll:!0})}catch{}M.current=null}j&&(N==null||N())}}function L(u){h==null||h(u)}var K=a.exports.useRef(!1),z=a.exports.useRef(),re=function(){clearTimeout(z.current),K.current=!0},ie=function(){z.current=setTimeout(function(){K.current=!1})},Y=null;$&&(Y=function(A){K.current?K.current=!1:v.current===A.target&&L(A)});function le(u){if(c&&u.keyCode===F.ESC){u.stopPropagation(),L(u);return}i&&u.keyCode===F.TAB&&O.current.changeActive(!u.shiftKey)}return a.exports.useEffect(function(){return i&&X(!0),function(){}},[i]),a.exports.useEffect(function(){return function(){clearTimeout(z.current)}},[]),a.exports.useEffect(function(){return j?(s==null||s.lock(),s==null?void 0:s.unLock):function(){}},[j,s]),a.exports.createElement("div",E({className:T("".concat(t,"-root"),W)},ce(e,{data:!0})),a.exports.createElement(de,{prefixCls:t,visible:S&&i,motionName:J(t,g,w),style:C({zIndex:o},V),maskProps:U}),a.exports.createElement("div",E({tabIndex:-1,onKeyDown:le,className:T("".concat(t,"-wrap"),m),ref:v,onClick:Y,style:C(C({zIndex:o},x),{},{display:j?null:"none"})},R),a.exports.createElement(ne,E({},e,{onMouseDown:re,onMouseUp:ie,ref:O,closable:P,ariaId:ae,prefixCls:t,visible:i,onClose:L,onVisibleChanged:oe,motionName:J(t,I,D)}))))}var ye=function(n){var t=n.visible,o=n.getContainer,r=n.forceRender,i=n.destroyOnClose,l=i===void 0?!1:i,c=n.afterClose,d=a.exports.useState(t),b=B(d,2),s=b[0],x=b[1];return a.exports.useEffect(function(){t&&x(!0)},[t]),o===!1?a.exports.createElement(ee,E({},n,{getOpenCount:function(){return 2}})):!r&&l&&!s?null:a.exports.createElement(fe,{visible:t,forceRender:r,getContainer:o},function(m){return a.exports.createElement(ee,E({},n,{destroyOnClose:l,afterClose:function(){c==null||c(),x(!1)}},m))})};ye.displayName="Dialog";export{ye as D};
