import{a as d,c as q,e as E,d as V}from"./@babel.462cdc09.js";import{r as t}from"./react.1dc75e1e.js";import{w as fe,K as W,P as me}from"./rc-util.84f8f60a.js";import{c as S}from"./classnames.894b94fb.js";import{C as X}from"./rc-motion.5bae9c79.js";var ve=function(n){var f=n.prefixCls,m=n.className,c=n.style,s=n.children,l=n.containerRef;return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement("div",{className:S("".concat(f,"-content"),m),style:d({},c),"aria-modal":"true",role:"dialog",ref:l},s))},Y=t.exports.createContext(null);function j(e){return typeof e=="string"&&String(Number(e))===e?(fe(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var H={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function _(e){var n,f,m,c,s=e.prefixCls,l=e.open,u=e.placement,D=e.inline,k=e.push,p=e.forceRender,g=e.autoFocus,P=e.keyboard,i=e.scrollLocker,w=e.rootClassName,b=e.rootStyle,v=e.zIndex,J=e.className,Q=e.style,R=e.motion,U=e.width,Z=e.height,$=e.children,ee=e.contentWrapperStyle,O=e.mask,te=e.maskClosable,ae=e.maskMotion,ne=e.maskClassName,re=e.maskStyle,L=e.afterOpenChange,I=e.onClose,z=t.exports.useRef(),K=t.exports.useRef(),A=t.exports.useRef(),oe=function(o){var x=o.keyCode,y=o.shiftKey;switch(x){case W.TAB:{if(x===W.TAB){if(!y&&document.activeElement===A.current){var M;(M=K.current)===null||M===void 0||M.focus({preventScroll:!0})}else if(y&&document.activeElement===K.current){var F;(F=A.current)===null||F===void 0||F.focus({preventScroll:!0})}}break}case W.ESC:{I&&P&&I(o);break}}};t.exports.useEffect(function(){if(l&&g){var a;(a=z.current)===null||a===void 0||a.focus({preventScroll:!0})}},[l,g]);var le=t.exports.useState(!1),T=q(le,2),se=T[0],B=T[1],r=t.exports.useContext(Y),N;k===!1?N={distance:0}:k===!0?N={}:N=k||{};var h=(n=(f=(m=N)===null||m===void 0?void 0:m.distance)!==null&&f!==void 0?f:r==null?void 0:r.pushDistance)!==null&&n!==void 0?n:180,ie=t.exports.useMemo(function(){return{pushDistance:h,push:function(){B(!0)},pull:function(){B(!1)}}},[h]);t.exports.useEffect(function(){if(l){var a;r==null||(a=r.push)===null||a===void 0||a.call(r)}else{var o;r==null||(o=r.pull)===null||o===void 0||o.call(r)}},[l]),t.exports.useEffect(function(){l&&O&&(i==null||i.lock())},[l,O]),t.exports.useEffect(function(){return function(){var a;i==null||i.unLock(),r==null||(a=r.pull)===null||a===void 0||a.call(r)}},[]);var ce=O&&t.exports.createElement(X,E({key:"mask"},ae,{visible:l}),function(a,o){var x=a.className,y=a.style;return t.exports.createElement("div",{className:S("".concat(s,"-mask"),x,ne),style:d(d({},y),re),onClick:te?I:void 0,ref:o})}),ue=typeof R=="function"?R(u):R,C={};if(se&&h)switch(u){case"top":C.transform="translateY(".concat(h,"px)");break;case"bottom":C.transform="translateY(".concat(-h,"px)");break;case"left":C.transform="translateX(".concat(h,"px)");break;default:C.transform="translateX(".concat(-h,"px)");break}u==="left"||u==="right"?C.width=j(U):C.height=j(Z);var de=t.exports.createElement(X,E({key:"panel"},ue,{visible:l,forceRender:p,onVisibleChanged:function(o){L==null||L(o),o||i==null||i.unLock()},removeOnLeave:!1,leavedClassName:"".concat(s,"-content-wrapper-hidden")}),function(a,o){var x=a.className,y=a.style;return t.exports.createElement("div",{className:S("".concat(s,"-content-wrapper"),x),style:d(d(d({},C),y),ee)},t.exports.createElement(ve,{containerRef:o,prefixCls:s,className:J,style:Q},$))}),G=d({},b);return v&&(G.zIndex=v),t.exports.createElement(Y.Provider,{value:ie},t.exports.createElement("div",{className:S(s,"".concat(s,"-").concat(u),w,(c={},V(c,"".concat(s,"-open"),l),V(c,"".concat(s,"-inline"),D),c)),style:G,tabIndex:-1,ref:z,onKeyDown:oe},ce,t.exports.createElement("div",{tabIndex:0,ref:K,style:H,"aria-hidden":"true","data-sentinel":"start"}),de,t.exports.createElement("div",{tabIndex:0,ref:A,style:H,"aria-hidden":"true","data-sentinel":"end"})))}var he=function(){return document.body},Ce=function(n){var f=n.open,m=n.getContainer,c=n.forceRender,s=n.wrapperClassName,l=n.prefixCls,u=n.afterOpenChange,D=n.destroyOnClose,k=t.exports.useState(!1),p=q(k,2),g=p[0],P=p[1],i=function(v){P(v),u==null||u(v)};if(!c&&!g&&!f&&D)return null;var w=d(d({},n),{},{prefixCls:l,afterOpenChange:i});return m===!1?t.exports.createElement(_,E({},w,{inline:!0})):t.exports.createElement(me,{visible:f,forceRender:c,getContainer:m,wrapperClassName:s},function(b){var v=b.scrollLocker;return t.exports.createElement(_,E({},w,{scrollLocker:v}))})};Ce.defaultProps={open:!1,getContainer:he,prefixCls:"rc-drawer",placement:"right",autoFocus:!0,keyboard:!0,width:378,mask:!0,maskClosable:!0};export{Ce as D};
